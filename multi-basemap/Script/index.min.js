require(["esri/map","esri/config","esri/domUtils","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/tasks/query","esri/InfoTemplate"],function(n,t,i,r,u,f,e){function s(n){var t=n.match(/(\d+)'\s*(?:(\d+(?:\.\d+)?)")?/i);if(!t)throw new Error("Invalid format.");this.feet=Number(t[1]);this.inches=t[2]?Number(t[2]):0}function v(n){var i=["<table class='bridge-info on-under-code-",n.attributes.on_under_code===1?"on":"under","'>"],t,r;for(t in n.attributes)n.attributes.hasOwnProperty(t)&&(r=n.attributes[t],i.push("<tr><th>",t.replace(/_/g," "),"<\/th><td>",r,"<\/td><\/tr>"));return i.push("<\/table>"),i.join("")}function a(n,t,i,r){var u=[n," < ",t.toWeirdoFormat()],e;return i&&(r?u.push(" AND SRID = '",i,"'"):u.push(" AND SRID LIKE '",i,"%'")),e=new f,e.where=u.join(""),e}var o,h,c,l;t.defaults.io.proxyUrl="proxy/proxy.ashx";o=new n("map",{showAttribution:!0});o.addLayer(new u("http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/WebBaseMapWebMercator/MapServer"));s.prototype.totalInches=function(){return this.feet*12+this.inches};s.prototype.totalFeet=function(){return this.feet+this.inches/12};s.prototype.toWeirdoFormat=function(){return this.feet*100+this.inches};l=new e("${bridge_name}",v);o.on("load",function(){h=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgeOnRecords/MapServer/0",{id:"bridge-on",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:l});c=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgeUnderRecords/MapServer/0",{id:"bridge-under",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:l});o.addLayer(h);o.addLayer(c)});o.on("update-end",function(){i.hide(document.getElementById("mapProgress"))});o.on("update-start",function(){i.show(document.getElementById("mapProgress"))});document.forms.clearanceForm.onsubmit=function(){var i,t,n,r,u;try{this.blur();i=this.clearance.value;t=Number(i);n;isNaN(t)?(n=new s(i),t=n.totalInches()):n=new s("0'"+t+'"');r=this.route.value;u=this.routeFilterType.value==="exact";n&&(h.selectFeatures(a("min_vert_deck",n,r,u)),c.selectFeatures(a("vert_clrnc_route_min",n,r,u)))}catch(f){console.error(f)}return!1};document.forms.clearanceForm.onreset=function(){h.clearSelection();c.clearSelection()}});
/*
//# sourceMappingURL=index.min.js.map
*/