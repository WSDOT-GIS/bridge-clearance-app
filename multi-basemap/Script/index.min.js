require(["esri/map","esri/config","esri/domUtils","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/tasks/query","esri/InfoTemplate","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer"],function(n,t,i,r,u,f,e,o,s,h){function a(n){var t=n.match(/(\d+)'\s*(?:(\d+(?:\.\d+)?)")?/i);if(!t)throw new Error("Invalid format.");this.feet=Number(t[1]);this.inches=t[2]?Number(t[2]):0}function k(n){var i=["<table class='bridge-info on-under-code-",n.attributes.on_under_code===1?"on":"under","'>"],t,r;for(t in n.attributes)n.attributes.hasOwnProperty(t)&&(r=n.attributes[t],i.push("<tr><th>",t.replace(/_/g," "),"<\/th><td>",r,"<\/td><\/tr>"));return i.push("<\/table>"),i.join("")}function b(n,t,i,r){var u=[n," < ",t.toWeirdoFormat()],e;return i&&(r?u.push(" AND SRID = '",i,"'"):u.push(" AND SRID LIKE '",i,"%'")),e=new f,e.where=u.join(""),e}var c,v,y,w="http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/WebBaseMapWebMercator/MapServer",p,l;t.defaults.io.proxyUrl="proxy/proxy.ashx";c=new n("map",{showAttribution:!0});c.addLayer(new u(w,{id:"wsdot"}));a.prototype.totalInches=function(){return this.feet*12+this.inches};a.prototype.totalFeet=function(){return this.feet+this.inches/12};a.prototype.toWeirdoFormat=function(){return this.feet*100+this.inches};p=new e("${bridge_name}",k);c.on("load",function(){v=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgeOnRecords/MapServer/0",{id:"bridge-on",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:p});y=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgeUnderRecords/MapServer/0",{id:"bridge-under",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:p});c.addLayer(v);c.addLayer(y)});l=new o({map:c,basemaps:[new s({id:"wsdot",title:"WSDOT",thumbnailUrl:"Images/WsdotBasemapThumbnail.jpg",layers:[new h({url:w})]})],basemapIds:["wsdot"]},"basemapGallery");l.startup();l.on("load",function(){l.select("wsdot");i.hide(l.domNode)});c.on("update-end",function(){i.hide(document.getElementById("mapProgress"))});c.on("update-start",function(){i.show(document.getElementById("mapProgress"))});document.getElementById("basemapsToggleButton").addEventListener("click",function(){i.toggle(l.domNode)});document.forms.clearanceForm.onsubmit=function(){var i,t,n,r,u;try{this.blur();i=this.clearance.value;t=Number(i);n;isNaN(t)?(n=new a(i),t=n.totalInches()):n=new a("0'"+t+'"');r=this.route.value;u=this.routeFilterType.value==="exact";n&&(v.selectFeatures(b("min_vert_deck",n,r,u)),y.selectFeatures(b("vert_clrnc_route_min",n,r,u)))}catch(f){console.error(f)}return!1};document.forms.clearanceForm.onreset=function(){v.clearSelection();y.clearSelection()}});
/*
//# sourceMappingURL=index.min.js.map
*/