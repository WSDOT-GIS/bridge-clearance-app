require(["esri/map","esri/config","esri/domUtils","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/tasks/query","esri/InfoTemplate","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer","esri/Color","esri/symbols/CartographicLineSymbol","esri/geometry/webMercatorUtils"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function p(n){var t=n.match(/(\d+)'\s*(?:(\d+(?:\.\d+)?)")?/i);if(!t)throw new Error("Invalid format.");this.feet=Number(t[1]);this.inches=t[2]?Number(t[2]):0}function nt(n){var i=n.geometry,t,r=null;return t=i.type==="point"?[i.x,i.y]:i.paths?i.paths[0][0]:null,t=a.xyToLngLat(t[0],t[1]),t&&(r=["http://maps.google.com/maps?q=&layer=c&cbll=",t[1],",",t[0],"&cbp=11,0,0,0,0"].join("")),r}function tt(n){var i,t,r;return n.attributes.SRID&&(t=n.attributes.SRID.match(/(\d{3})(?:(.{2})(.{0,6}))?/),t&&(i=["http://srview3i.wsdot.loc/stateroute/picturelog/v3/client/SRview.Windows.Viewer.application?","srnum=",t[1],"&RRT=",t[2]||"","&RRQ=",t[3]||""].join(""))),r=n.attributes.hasOwnProperty("BeginARM")?"BeginARM":n.attributes.hasOwnProperty("PointARM")?"PointARM":null,r&&(i+="&arm="+n.attributes[r]),i}function it(n){var t=null;return n&&n.attributes&&(n.attributes.control_entity_gid?t="http://beist.wsdot.loc/InventoryAndRepair/Inventory/BRIDGE/Details/Index/"+n.attributes.control_entity_gid.replace(/[\{\}]/g,""):n.attributes.key_structure_id&&(t="http://beist.wsdot.loc/InventoryAndRepair/Inventory/BRIDGE?StructureID="+n.attributes.key_structure_id)),t}function rt(n){var o=n._graphicsLayer,t=[],i,s,r=o===y?"min_vert_deck":o===b?"vert_clrnc_route_min":null,u,f,e;r&&t.push("<dl><dt>",r,"<\/dt><dd>",n.attributes[r],"<\/dd><\/dl>");t.push("<h2>Links<\/h2><ul>");u=nt(n);u&&t.push("<li><a href='",u,"' target='google_street_view'>Google Street View<\/a><\/li>");f=tt(n);f&&t.push("<li><a href='",f,"' target='_blank'>Open location in SRView<\/a><\/li>");e=it(n);e&&t.push("<li><a href='",e,"' target='beist'>BEIst<\/a><\/li>");t.push("<\/ul>");t.push("<table class='bridge-info on-under-code-",n.attributes.on_under_code===1?"on":"under","'>");for(i in n.attributes)n.attributes.hasOwnProperty(i)&&!/^(?:(?:control_entity_gid)|(?:OBJECTID_?\d*)|(Field\d+)|(Shape_Length))$/i.test(i)&&(s=n.attributes[i],t.push("<tr><th>",i.replace(/_/g," "),"<\/th><td>",s,"<\/td><\/tr>"));return t.push("<\/table>"),t.join("")}function g(n,t,i,r){var u,e;return/^\d$/.test(i)?i="00"+i:/^\d{2}$/&&(i=0+i),u=[n," < ",t.toWeirdoFormat()],i&&(r?u.push(" AND SRID = '",i,"'"):u.push(" AND SRID LIKE '",i,"%'")),e=new f,e.where=u.join(""),e}var v,y,b,d="http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/WebBaseMapWebMercator/MapServer",k,w;t.defaults.io.proxyUrl="proxy/proxy.ashx";v=new n("map",{showAttribution:!0,spatialReference:{wkid:3857},lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.516963999937,scale:295828763.795777},{level:2,resolution:39135.758482000092,scale:147914381.897889},{level:3,resolution:19567.879240999919,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.9924525624949,scale:4622324.434309},{level:8,resolution:611.49622628137968,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.437028285073239,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.5546285356341549,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.3886571339746849,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.59716428355981721,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}]});v.addLayer(new u(d,{id:"wsdot"}));p.prototype.totalInches=function(){return this.feet*12+this.inches};p.prototype.totalFeet=function(){return this.feet+this.inches/12};p.prototype.toWeirdoFormat=function(){return this.feet*100+this.inches};p.prototype.toString=function(){return[this.feet.toString(),"'",this.inches.toString(),'"'].join("")};k=new e("${crossing_description}",rt);v.on("load",function(){var n=new l(l.STYLE_SOLID,new c([255,85,0,255]),10,l.CAP_ROUND,l.JOIN_MITER,5);y=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/1",{id:"bridge-on",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:k});y.setSelectionSymbol(n);b=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/0",{id:"bridge-under",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:k});v.addLayer(y);v.addLayer(b)});w=new o({map:v,basemaps:[new s({id:"wsdot",title:"WSDOT",thumbnailUrl:"Images/WsdotBasemapThumbnail.jpg",layers:[new h({url:d})]})],basemapIds:["wsdot"]},"basemapGallery");w.startup();w.on("load",function(){w.select("wsdot");i.hide(w.domNode)});v.on("update-end",function(){i.hide(document.getElementById("mapProgress"))});v.on("update-start",function(){i.show(document.getElementById("mapProgress"))});document.getElementById("basemapsToggleButton").onclick=function(){i.toggle(w.domNode)};document.forms.clearanceForm.onsubmit=function(){var i,t,n,r,u;try{this.blur();i=this.clearance.value;t=Number(i);n;isNaN(t)?(n=new p(i),t=n.totalInches()):n=new p("0'"+t+'"');r=this.route.value;u=!document.getElementById("includeNonMainlineCheckbox").checked;n&&(y.selectFeatures(g("min_vert_deck",n,r,u)),b.selectFeatures(g("vert_clrnc_route_min",n,r,u)))}catch(f){console.error(f)}return!1};document.forms.clearanceForm.onreset=function(){y.clearSelection();b.clearSelection()}});
/*
//# sourceMappingURL=index.min.js.map
*/