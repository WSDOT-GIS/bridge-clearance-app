require(["esri/map","esri/geometry/Extent","esri/config","esri/domUtils","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/tasks/query","esri/InfoTemplate","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer","esri/Color","esri/symbols/CartographicLineSymbol","esri/geometry/webMercatorUtils","esri/renderers/UniqueValueRenderer","esri/symbols/SimpleMarkerSymbol","esri/urlUtils","dojo/domReady!"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){function pt(){var t=document.forms.clearanceForm,i=w.urlToObject(location.toString()),n=i.query;n&&(n.clearance&&(t.clearance.value=n.clearance),n.route&&(t.route.value=n.route),n.hasOwnProperty("include-non-mainline")&&(t["include-non-mainline"].checked=/^(?:(?:true)|1|(?:yes))$/i.test(n["include-non-mainline"])),t.onsubmit())}function rt(){var i,u,n,f,r,t,e;for(i=document.getElementById("topNavBar"),u=document.getElementById("map"),f=document.getElementById("sidebar"),n=window.innerHeight-i.clientHeight-40,n=[n,"px"].join(""),u.style.height=n,f.style.height=n,r=document.querySelectorAll(".tab-pane"),n=window.innerHeight-i.clientHeight-80,n=[n,"px"].join(""),t=0,e=r.length;t<e;t+=1)r[t].style.height=n}function ut(n){var t=0;return it<=n.attributes.vert_clrnc_route_max&&(t=1),t}function ft(n){var r,t,i;return typeof n=="number"?(t=n%100,r=(n-t)/100,i=r*12+t):i=n,i}function ht(n){var i,t;return t=n%12,i=(n-t)/12,i*100+t}function et(n){var t=n%12,i=(n-t)/12;return[i,"'",t,'"'].join("")}function g(n){var t=n.match(/(\d+)'\s*(?:(\d+(?:\.\d+)?)")?/i);if(!t)throw new Error("Invalid format.");this.feet=Number(t[1]);this.inches=t[2]?Number(t[2]):0}function wt(n){var i=n.geometry,t,r=null;return t=i.type==="point"?[i.x,i.y]:i.paths?i.paths[0][0]:null,t=v.xyToLngLat(t[0],t[1]),t&&(r=["http://maps.google.com/maps?q=&layer=c&cbll=",t[1],",",t[0],"&cbp=11,0,0,0,0"].join("")),r}function ct(n){return n.replace(/_/g," ")}function bt(n){var t=document.createElement("dl"),r,u,i;t.setAttribute("class","dl-horizontal");for(i in n)n.hasOwnProperty(i)&&(r=document.createElement("dt"),u=document.createElement("dd"),r.textContent=ct(i),u.textContent=n[i],t.appendChild(r),t.appendChild(u));return t}function kt(n,t,i){var f=document.createElement("table"),e,o,s,u,h,r;f.setAttribute("class","bridge-info table table-striped table-hover");f.createTHead();h=f.createTBody();for(r in n)!n.hasOwnProperty(r)||t&&t.test(r)||(e=document.createElement("tr"),o=document.createElement("th"),o.textContent=ct(r),e.appendChild(o),s=document.createElement("td"),u=n[r],i&&i.test(r)&&u>0&&(u=et(ft(u)-3)),s.textContent=u,e.appendChild(s),h.appendChild(e));return f}function dt(){var n=document.querySelector("table.bridge-info");return n&&(n.classList.contains("collapsed")?(n.classList.remove("collapsed"),this.textContent="Hide details"):(n.classList.add("collapsed"),this.textContent="Details...")),!1}function gt(n){var a,e,r,v,s,h,t,c,o,l;a=/^(?:(?:((OBJECTID_?)|(Field))\d*)|(?:Shape_Length)|(?:\w+(?:(?:code)|(?:class)|(?:Error)|(?:_gid)|(?:indicator)))|(?:(?:(?:lrs)|(?:list))\w+)|(?:(?:min_)?(?:(?:vert)|(?:horiz))\w+)|(?:(?:(?:lateral)|(?:fed)|(?:sort))\w+)|(?:eventID)|(?:agency_id))$/i;var i=document.createDocumentFragment(),f=ft(n.attributes.vert_clrnc_route_min),u=ft(n.attributes.vert_clrnc_route_max);return f>3&&(f-=3),u&&u>3&&(u-=3),e={},r=document.createElement("h5"),r.textContent="Vertical Clearance",i.appendChild(r),f&&(e.Minimum=et(f)),u&&(e.Maximum=et(u)),v=bt(e),i.appendChild(v),r=document.createElement("h5"),r.textContent="Links",i.appendChild(r),s=document.createElement("ul"),i.appendChild(s),c=wt(n),c&&(h=document.createElement("li"),t=document.createElement("a"),t.href=c,t.textContent="Google Street View",t.target="_blank",h.appendChild(t),s.appendChild(h)),o=kt(n.attributes,a,yt),o.classList&&(o.classList.add("collapsed"),l=document.createElement("p"),t=document.createElement("a"),t.href="#",t.textContent="Details...",t.onclick=dt,l.appendChild(t),i.appendChild(l)),i.appendChild(o),i}function lt(n){var t=null,i=null,u=null,o,s,h,f,e;n.target.id==="bridge-on"?(t="oncount",i="noPassOn",u="somePassOn",r.hide(nt)):n.target.id==="bridge-under"&&(t="undercount",i="noPassUnder",u="somePassUnder",r.hide(tt));t&&(o=document.getElementById(t),s=document.getElementById(i),h=document.getElementById(u),e=n.features.length,f=n.features.filter(function(n){return!!ut(n)}).length,o.textContent=e,s.textContent=e-f,h.textContent=f)}function at(){var n,t,i;this&&this.id&&(this.id==="bridge-on"?(n="oncount",t="noPassOn",i="somePassOn"):this.id==="bridge-under"&&(n="undercount",t="noPassUnder",i="somePassUnder"),n&&(document.getElementById(n).textContent="0",document.getElementById(t).textContent="0",document.getElementById(i).textContent="0"))}function vt(n,t,i,r){var u=[n," < ",ht(t+3)],f;return i&&(/^\d$/.test(i)?i="00"+i:/^\d{2}$/.test(i)&&(i="0"+i),r?u.push(" AND SRID = '",i,"'"):u.push(" AND SRID LIKE '",i,"%'")),f=new e,f.where=u.join(""),f}function ni(n){var u,t,o,i,f,e={clearance:n.clearance.value,route:n.route.value,"include-non-mainline":document.getElementById("includeNonMainlineCheckbox").checked};try{n.blur();u=n.clearance.value;t=Number(u);isNaN(t)&&(o=new g(u),t=o.totalInches());i=n.route.value;!i||/^\d+$/.test(i)||/^\d{3}(?:(\w{2})(\w{0,6}))?$/.test(i)?(f=!document.getElementById("includeNonMainlineCheckbox").checked,t&&(it=ht(t+3),k.selectFeatures(vt("vert_clrnc_route_min",t,i,f)),r.show(nt),d.selectFeatures(vt("vert_clrnc_route_min",t,i,f)),r.show(tt))):(alert("Invalid route"),e=null)}catch(s){console.error(s);e=null}return e}function ti(n){var i=[];for(var t in n)n.hasOwnProperty(t)&&i.push([t,encodeURIComponent(n[t])].join("="));return"?"+i.join("&")}var b,k,d,nt,tt,it,yt=/^(?:(?:horiz_clrnc_route)|(?:horiz_clrnc_rvrs)|(?:vert_clrnc_route_max)|(?:vert_clrnc_route_min)|(?:vert_clrnc_rvrs_max)|(?:vert_clrnc_rvrs_min)|(?:min_vert_(?:(?:deck)|(?:under))))$/i,ot,st;$("#tabs a").click(function(n){n.preventDefault();$(this).tab("show")});$("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active")});rt();window.addEventListener("resize",rt,!0);window.addEventListener("deviceorientation",rt,!0);nt=document.getElementById("onProgress");tt=document.getElementById("underProgress");r.hide(nt);r.hide(tt);ot="http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/WebBaseMapWebMercator/MapServer";i.defaults.io.proxyUrl="proxy/proxy.ashx";b=new n("map",{extent:new t({xmin:-14058520.2360666,ymin:5539437.0343902,ymax:6499798.10086703,xmax:-12822768.6769759,spatialReference:{wkid:3857}}),lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176}],minZoom:7,maxZoom:19,showAttribution:!0});b.addLayer(new f(ot,{id:"wsdot"}));g.prototype.totalInches=function(){return this.feet*12+this.inches};g.prototype.totalFeet=function(){return this.feet+this.inches/12};g.prototype.toWeirdoFormat=function(){return this.feet*100+this.inches};g.prototype.toString=function(){return[this.feet.toString(),"'",this.inches.toString(),'"'].join("")};st=new o("${crossing_description}",gt);b.on("load",function(){var v,w,g,t,i,r,f,e,o,n;r=new l([255,85,0,255]);f=new l([255,255,0,255]);w=new a(a.STYLE_SOLID,r,10,a.CAP_ROUND,a.JOIN_MITER,5);g=new a(a.STYLE_SOLID,f,10,a.CAP_ROUND,a.JOIN_MITER,5);v=(new p).setColor(r);e="Can pass in some lanes";o="Vehicle may be able to pass in some but not all lanes.";i=new y(w,ut);i.addValue({value:1,symbol:g,label:e,description:o});t=new y(v,ut);t.addValue({value:1,symbol:(new p).setColor(f),label:e,description:o});k=new u("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/1",{id:"bridge-on",mode:u.MODE_SELECTION,outFields:["*"],infoTemplate:st});k.setRenderer(i);k.on("selection-complete",lt);k.on("selection-clear",at);d=new u("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/0",{id:"bridge-under",mode:u.MODE_SELECTION,outFields:["*"],infoTemplate:st});d.setRenderer(t);d.on("selection-complete",lt);d.on("selection-clear",at);b.addLayer(k);b.addLayer(d);n=new s({map:b,basemaps:[new h({id:"wsdot",title:"WSDOT",thumbnailUrl:"Images/WsdotBasemapThumbnail.jpg",layers:[new c({url:ot})]}),new h({id:"hybrid",title:"Esri Hybrid",thumbnailUrl:"Images/EsriHybridThumbnail.png",layers:[new c({url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),new c({url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer"}),new c({url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}),]})],basemapIds:b.layerIds},"basemapGallery");n.startup();n.on("load",function(){n.select("wsdot")});pt()});b.on("update-end",function(){r.hide(document.getElementById("mapProgress"))});b.on("update-start",function(){r.show(document.getElementById("mapProgress"))});document.forms.clearanceForm.onsubmit=function(){var n=ni(this);return n&&history&&history.replaceState(n,document.title,ti(n)),!1};document.forms.clearanceForm.onreset=function(){k.clearSelection();d.clearSelection();it=null;history&&history.replaceState({clearance:null,route:null,"include-non-mainline":null},document.title,location.pathname)}});
/*
//# sourceMappingURL=index.min.js.map
*/