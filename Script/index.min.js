require(["esri/map","esri/config","esri/domUtils","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/tasks/query","esri/InfoTemplate","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer","esri/Color","esri/symbols/CartographicLineSymbol","esri/geometry/webMercatorUtils"],function(n,t,i,r,u,f,e,o,s,h,c,l,a){function w(n){var t=n.match(/(\d+)'\s*(?:(\d+(?:\.\d+)?)")?/i);if(!t)throw new Error("Invalid format.");this.feet=Number(t[1]);this.inches=t[2]?Number(t[2]):0}function nt(n){var i=n.geometry,t,r=null;return t=i.type==="point"?[i.x,i.y]:i.paths?i.paths[0][0]:null,t=a.xyToLngLat(t[0],t[1]),t&&(r=["http://maps.google.com/maps?q=&layer=c&cbll=",t[1],",",t[0],"&cbp=11,0,0,0,0"].join("")),r}function tt(n){var i,t,r;return n.attributes.SRID&&(t=n.attributes.SRID.match(/(\d{3})(?:(.{2})(.{0,6}))?/),t&&(i=["http://srview3i.wsdot.loc/stateroute/picturelog/v3/client/SRview.Windows.Viewer.application?","srnum=",t[1],"&RRT=",t[2]||"","&RRQ=",t[3]||""].join(""))),r=n.attributes.hasOwnProperty("BeginARM")?"BeginARM":n.attributes.hasOwnProperty("PointARM")?"PointARM":null,r&&(i+="&arm="+n.attributes[r]),i}function it(n){var t=null;return n&&n.attributes&&(n.attributes.control_entity_gid?t="http://beist.wsdot.loc/InventoryAndRepair/Inventory/BRIDGE/Details/Index/"+n.attributes.control_entity_gid.replace(/[\{\}]/g,""):n.attributes.key_structure_id&&(t="http://beist.wsdot.loc/InventoryAndRepair/Inventory/BRIDGE?StructureID="+n.attributes.key_structure_id)),t}function rt(n){var t=[],i,f,e=nt(n),r,u;e&&t.push("<p><a href='",e,"' target='google_street_view'>Google Street View<\/a><\/p>");r=tt(n);r&&t.push("<p><a href='",r,"'>Open location in SRView<\/a><\/p>");u=it(n);u&&t.push("<p><a href='",u,"' target='beist'>BEIst<\/a><\/p>");t.push("<table class='bridge-info on-under-code-",n.attributes.on_under_code===1?"on":"under","'>");for(i in n.attributes)n.attributes.hasOwnProperty(i)&&(f=n.attributes[i],t.push("<tr><th>",i.replace(/_/g," "),"<\/th><td>",f,"<\/td><\/tr>"));return t.push("<\/table>"),t.join("")}function g(n,t,i,r){var u=[n," < ",t.toWeirdoFormat()],e;return i&&(r?u.push(" AND SRID = '",i,"'"):u.push(" AND SRID LIKE '",i,"%'")),e=new f,e.where=u.join(""),e}var v,p,b,d="http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/WebBaseMapWebMercator/MapServer",k,y;t.defaults.io.proxyUrl="proxy/proxy.ashx";v=new n("map",{showAttribution:!0});v.addLayer(new u(d,{id:"wsdot"}));w.prototype.totalInches=function(){return this.feet*12+this.inches};w.prototype.totalFeet=function(){return this.feet+this.inches/12};w.prototype.toWeirdoFormat=function(){return this.feet*100+this.inches};k=new e("${bridge_name}",rt);v.on("load",function(){var n=new l(l.STYLE_SOLID,new c([255,0,0,255]),10,l.CAP_ROUND,l.JOIN_MITER,5);p=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgeOnRecords/MapServer/0",{id:"bridge-on",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:k});p.setSelectionSymbol(n);b=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgeUnderRecords/MapServer/0",{id:"bridge-under",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:k});v.addLayer(p);v.addLayer(b)});y=new o({map:v,basemaps:[new s({id:"wsdot",title:"WSDOT",thumbnailUrl:"Images/WsdotBasemapThumbnail.jpg",layers:[new h({url:d})]})],basemapIds:["wsdot"]},"basemapGallery");y.startup();y.on("load",function(){y.select("wsdot");i.hide(y.domNode)});v.on("update-end",function(){i.hide(document.getElementById("mapProgress"))});v.on("update-start",function(){i.show(document.getElementById("mapProgress"))});document.getElementById("basemapsToggleButton").addEventListener("click",function(){i.toggle(y.domNode)});document.forms.clearanceForm.onsubmit=function(){var i,t,n,r,u;try{this.blur();i=this.clearance.value;t=Number(i);n;isNaN(t)?(n=new w(i),t=n.totalInches()):n=new w("0'"+t+'"');r=this.route.value;u=this.routeFilterType.value==="exact";n&&(p.selectFeatures(g("min_vert_deck",n,r,u)),b.selectFeatures(g("vert_clrnc_route_min",n,r,u)))}catch(f){console.error(f)}return!1};document.forms.clearanceForm.onreset=function(){p.clearSelection();b.clearSelection()}});
/*
//# sourceMappingURL=index.min.js.map
*/