require(["esri/map","esri/config","esri/domUtils","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/tasks/query","esri/InfoTemplate","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer","esri/Color","esri/symbols/CartographicLineSymbol","esri/geometry/webMercatorUtils","esri/renderers/UniqueValueRenderer","esri/symbols/SimpleMarkerSymbol"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){function tt(){var n,t,i;n=document.getElementById("topNavBar");t=document.getElementById("map");i=window.innerHeight-n.clientHeight-40;t.style.height=[i,"px"].join("")}function et(n){var t=0;return nt<=n.attributes.vert_clrnc_route_max&&(t=1),t}function it(n){var r,t,i;return typeof n=="number"?(t=n%100,r=(n-t)/100,i=r*12+t):i=n,i}function ot(n){var i,t;return t=n%12,i=(n-t)/12,i*100+t}function rt(n){var t=n%12,i=(n-t)/12;return[i,"'",t,'"'].join("")}function k(n){var t=n.match(/(\d+)'\s*(?:(\d+(?:\.\d+)?)")?/i);if(!t)throw new Error("Invalid format.");this.feet=Number(t[1]);this.inches=t[2]?Number(t[2]):0}function vt(n){var i=n.geometry,t,r=null;return t=i.type==="point"?[i.x,i.y]:i.paths?i.paths[0][0]:null,t=a.xyToLngLat(t[0],t[1]),t&&(r=["http://maps.google.com/maps?q=&layer=c&cbll=",t[1],",",t[0],"&cbp=11,0,0,0,0"].join("")),r}function st(n){return n.replace(/_/g," ")}function yt(n){var t=document.createElement("dl"),r,u,i;t.setAttribute("class","dl-horizontal");for(i in n)n.hasOwnProperty(i)&&(r=document.createElement("dt"),u=document.createElement("dd"),r.textContent=st(i),u.textContent=n[i],t.appendChild(r),t.appendChild(u));return t}function pt(n,t,i){var f=document.createElement("table"),e,o,s,u,h,r;f.setAttribute("class","bridge-info table table-striped table-hover");f.createTHead();h=f.createTBody();for(r in n)!n.hasOwnProperty(r)||t&&t.test(r)||(e=document.createElement("tr"),o=document.createElement("th"),o.textContent=st(r),e.appendChild(o),s=document.createElement("td"),u=n[r],i&&i.test(r)&&u>0&&(u=rt(it(u)-3)),s.textContent=u,e.appendChild(s),h.appendChild(e));return f}function wt(){var n=document.querySelector("table.bridge-info");return n&&(n.classList.contains("collapsed")?(n.classList.remove("collapsed"),this.textContent="Hide details"):(n.classList.add("collapsed"),this.textContent="Details...")),!1}function bt(n){var a,e,r,v,s,h,t,c,o,l;a=/^(?:(?:((OBJECTID_?)|(Field))\d*)|(?:Shape_Length)|(?:\w+(?:(?:code)|(?:class)|(?:Error)|(?:_gid)|(?:indicator)))|(?:(?:(?:lrs)|(?:list))\w+)|(?:(?:min_)?(?:(?:vert)|(?:horiz))\w+)|(?:(?:(?:lateral)|(?:fed)|(?:sort))\w+)|(?:eventID)|(?:agency_id))$/i;var i=document.createDocumentFragment(),f=it(n.attributes.vert_clrnc_route_min),u=it(n.attributes.vert_clrnc_route_max);return f>3&&(f-=3),u&&u>3&&(u-=3),e={},r=document.createElement("h5"),r.textContent="Vertical Clearance",i.appendChild(r),f&&(e.Minimum=rt(f)),u&&(e.Maximum=rt(u)),v=yt(e),i.appendChild(v),r=document.createElement("h5"),r.textContent="Links",i.appendChild(r),s=document.createElement("ul"),i.appendChild(s),c=vt(n),c&&(h=document.createElement("li"),t=document.createElement("a"),t.href=c,t.textContent="Google Street View",t.target="_blank",h.appendChild(t),s.appendChild(h)),o=pt(n.attributes,a,at),o.classList&&(o.classList.add("collapsed"),l=document.createElement("p"),t=document.createElement("a"),t.href="#",t.textContent="Details...",t.onclick=wt,l.appendChild(t),i.appendChild(l)),i.appendChild(o),i}function ht(n){var t=null,r;n.target.id==="bridge-on"?(t="oncount",i.hide(d)):n.target.id==="bridge-under"&&(t="undercount",i.hide(g));t&&(r=document.getElementById(t),r&&(r.textContent=n.features.length))}function ct(){if(this&&this.id){var n=this.id==="bridge-on"?"oncount":this.id==="bridge-under"?"undercount":null;n&&(document.getElementById(n).textContent="0")}}function lt(n,t,i,r){var u=[n," < ",ot(t+3)],e;return i&&(/^\d$/.test(i)?i="00"+i:/^\d{2}$/.test(i)&&(i="0"+i),r?u.push(" AND SRID = '",i,"'"):u.push(" AND SRID LIKE '",i,"%'")),e=new f,e.where=u.join(""),e}var p,w,b,d,g,nt,at=/^(?:(?:horiz_clrnc_route)|(?:horiz_clrnc_rvrs)|(?:vert_clrnc_route_max)|(?:vert_clrnc_route_min)|(?:vert_clrnc_rvrs_max)|(?:vert_clrnc_rvrs_min)|(?:min_vert_(?:(?:deck)|(?:under))))$/i,ut,ft;$("#tabs a").click(function(n){n.preventDefault();$(this).tab("show")});$("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active")});tt();window.addEventListener("resize",tt,!0);window.addEventListener("deviceorientation",tt,!0);d=document.getElementById("onProgress");g=document.getElementById("underProgress");i.hide(d);i.hide(g);ut="http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/WebBaseMapWebMercator/MapServer";t.defaults.io.proxyUrl="proxy/proxy.ashx";p=new n("map",{basemap:"streets",center:[-120.80566406246835,47.413220330159461],zoom:7,showAttribution:!0});p.addLayer(new u(ut,{id:"wsdot"}));k.prototype.totalInches=function(){return this.feet*12+this.inches};k.prototype.totalFeet=function(){return this.feet+this.inches/12};k.prototype.toWeirdoFormat=function(){return this.feet*100+this.inches};k.prototype.toString=function(){return[this.feet.toString(),"'",this.inches.toString(),'"'].join("")};ft=new e("${crossing_description}",bt);p.on("load",function(){var k,d,g,t,i,u,f,e,a,n;u=new c([255,85,0,255]);f=new c([255,255,0,255]);d=new l(l.STYLE_SOLID,u,10,l.CAP_ROUND,l.JOIN_MITER,5);g=new l(l.STYLE_SOLID,f,10,l.CAP_ROUND,l.JOIN_MITER,5);k=(new y).setColor(u);e="Can pass in some lanes";a="Vehicle may be able to pass in some but not all lanes.";i=new v(d,et);i.addValue({value:1,symbol:g,label:e,description:a});t=new v(k,et);t.addValue({value:1,symbol:(new y).setColor(f),label:e,description:a});w=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/1",{id:"bridge-on",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:ft});w.setRenderer(i);w.on("selection-complete",ht);w.on("selection-clear",ct);b=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/0",{id:"bridge-under",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:ft});b.setRenderer(t);b.on("selection-complete",ht);b.on("selection-clear",ct);p.addLayer(w);p.addLayer(b);n=new o({map:p,basemaps:[new s({id:"wsdot",title:"WSDOT",thumbnailUrl:"Images/WsdotBasemapThumbnail.jpg",layers:[new h({url:ut})]})],basemapIds:p.layerIds},"basemapGallery");n.startup();n.on("load",function(){n.select("wsdot")})});p.on("update-end",function(){i.hide(document.getElementById("mapProgress"))});p.on("update-start",function(){i.show(document.getElementById("mapProgress"))});document.forms.clearanceForm.onsubmit=function(){var r,n,f,t,u;try{if(this.blur(),r=this.clearance.value,n=Number(r),isNaN(n)&&(f=new k(r),n=f.totalInches()),t=this.route.value,t&&!(/^\d+$/.test(t)||/^\d{3}(?:(\w{2})(\w{0,6}))?$/.test(t)))return alert("Invalid route"),!1;u=!document.getElementById("includeNonMainlineCheckbox").checked;n&&(nt=ot(n+3),w.selectFeatures(lt("vert_clrnc_route_min",n,t,u)),i.show(d),b.selectFeatures(lt("vert_clrnc_route_min",n,t,u)),i.show(g))}catch(e){console.error(e)}return!1};document.forms.clearanceForm.onreset=function(){w.clearSelection();b.clearSelection();nt=null}});
/*
//# sourceMappingURL=index.min.js.map
*/