require(["esri/map","esri/config","esri/domUtils","esri/layers/FeatureLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/tasks/query","esri/InfoTemplate","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer","esri/Color","esri/symbols/CartographicLineSymbol","esri/geometry/webMercatorUtils","esri/dijit/HomeButton","esri/renderers/UniqueValueRenderer","esri/symbols/SimpleMarkerSymbol"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){function ot(n){var t=0;return it<n.attributes.vert_clrnc_route_max&&(t=1),t}function rt(n){var r,t,i;return typeof n=="number"?(t=n%100,r=(n-t)/100,i=r*12+t):i=n,i}function st(n){var i,t;return t=n%12,i=(n-t)/12,i*100+t}function ut(n){var t=n%12,i=(n-t)/12;return[i,"'",t,'"'].join("")}function g(n){var t=n.match(/(\d+)'\s*(?:(\d+(?:\.\d+)?)")?/i);if(!t)throw new Error("Invalid format.");this.feet=Number(t[1]);this.inches=t[2]?Number(t[2]):0}function pt(n){var i=n.geometry,t,r=null;return t=i.type==="point"?[i.x,i.y]:i.paths?i.paths[0][0]:null,t=a.xyToLngLat(t[0],t[1]),t&&(r=["http://maps.google.com/maps?q=&layer=c&cbll=",t[1],",",t[0],"&cbp=11,0,0,0,0"].join("")),r}function ht(n){return n.replace(/_/g," ")}function wt(n){var t=document.createElement("dl"),i,r;for(var u in n)n.hasOwnProperty(u)&&(i=document.createElement("dt"),r=document.createElement("dd"),i.textContent=ht(u),r.textContent=n[u],t.appendChild(i),t.appendChild(r));return t}function bt(n,t,i){var e=document.createElement("table"),f,o,s,u,r;e.setAttribute("class","bridge-info");for(r in n)!n.hasOwnProperty(r)||t&&t.test(r)||(f=document.createElement("tr"),o=document.createElement("th"),o.textContent=ht(r),f.appendChild(o),s=document.createElement("td"),u=n[r],i&&i.test(r)&&u>0&&(u=ut(rt(u)-3)),s.textContent=u,f.appendChild(s),e.appendChild(f));return e}function kt(){var n=document.querySelector("table.bridge-info");return n&&(n.classList.contains("collapsed")?(n.classList.remove("collapsed"),this.textContent="Hide details"):(n.classList.add("collapsed"),this.textContent="Details...")),!1}function dt(n){var a,f,v,o,s,h,t,c,e,l;a=/^(?:(?:\w+_gid)|(?:OBJECTID_?\d*)|(Field\d+)|(Shape_Length))$/i;var i=document.createDocumentFragment(),u=rt(n.attributes.vert_clrnc_route_min),r=rt(n.attributes.vert_clrnc_route_max);return u>3&&(u-=3),r&&r>3&&(r-=3),f={},u&&(f["Minimum Vertical Clearance"]=ut(u)),r&&(f["Maximum Vertical Clearance"]=ut(r)),v=wt(f),i.appendChild(v),o=document.createElement("h2"),o.textContent="Links",i.appendChild(o),s=document.createElement("ul"),i.appendChild(s),c=pt(n),c&&(h=document.createElement("li"),t=document.createElement("a"),t.href=c,t.textContent="Google Street View",t.target="_blank",h.appendChild(t),s.appendChild(h)),e=bt(n.attributes,a,yt),e.classList&&(e.classList.add("collapsed"),l=document.createElement("p"),t=document.createElement("a"),t.href="#",t.textContent="Details...",t.onclick=kt,l.appendChild(t),i.appendChild(l)),i.appendChild(e),i}function ct(n){var t=null,r;n.target.id==="bridge-on"?(t="oncount",i.hide(nt)):n.target.id==="bridge-under"&&(t="undercount",i.hide(tt));t&&(r=document.getElementById(t),r&&(r.textContent=n.features.length))}function lt(){if(this&&this.id){var n=this.id==="bridge-on"?"oncount":this.id==="bridge-under"?"undercount":null;n&&(document.getElementById(n).textContent="0")}}function vt(n,t,i,r){var u=[n," < ",st(t-3)],e;return i&&(/^\d$/.test(i)?i="00"+i:/^\d{2}$/.test(i)&&(i="0"+i),r?u.push(" AND SRID = '",i,"'"):u.push(" AND SRID LIKE '",i,"%'")),e=new f,e.where=u.join(""),e}var w,b,k,nt,tt,it,yt=/^(?:(?:horiz_clrnc_route)|(?:horiz_clrnc_rvrs)|(?:vert_clrnc_route_max)|(?:vert_clrnc_route_min)|(?:vert_clrnc_rvrs_max)|(?:vert_clrnc_rvrs_min)|(?:min_vert_(?:(?:deck)|(?:under))))$/i,ft,et,at,d;nt=document.getElementById("onProgress");tt=document.getElementById("underProgress");i.hide(nt);i.hide(tt);ft="http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/WebBaseMapWebMercator/MapServer";t.defaults.io.proxyUrl="proxy/proxy.ashx";w=new n("map",{showAttribution:!0,spatialReference:{wkid:3857},lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555},{level:1,resolution:78271.516963999937,scale:295828763.795777},{level:2,resolution:39135.758482000092,scale:147914381.897889},{level:3,resolution:19567.879240999919,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.9924525624949,scale:4622324.434309},{level:8,resolution:611.49622628137968,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.437028285073239,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.5546285356341549,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.3886571339746849,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.59716428355981721,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}]});w.addLayer(new u(ft,{id:"wsdot"}));g.prototype.totalInches=function(){return this.feet*12+this.inches};g.prototype.totalFeet=function(){return this.feet+this.inches/12};g.prototype.toWeirdoFormat=function(){return this.feet*100+this.inches};g.prototype.toString=function(){return[this.feet.toString(),"'",this.inches.toString(),'"'].join("")};et=new e("${crossing_description}",dt);w.on("load",function(){var o,s,h,n,t,i,u,f,e;i=new c([255,85,0,255]);u=new c([255,255,0,255]);s=new l(l.STYLE_SOLID,i,10,l.CAP_ROUND,l.JOIN_MITER,5);h=new l(l.STYLE_SOLID,u,10,l.CAP_ROUND,l.JOIN_MITER,5);o=(new p).setColor(i);f="Can pass in some lanes";e="Vehicle may be able to pass in some but not all lanes.";t=new y(s,ot);t.addValue({value:1,symbol:h,label:f,description:e});n=new y(o,ot);n.addValue({value:1,symbol:(new p).setColor(u),label:f,description:e});b=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/1",{id:"bridge-on",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:et});b.setRenderer(t);b.on("selection-complete",ct);b.on("selection-clear",lt);k=new r("http://hqolymgis99t/arcgis/rest/services/Bridges/BridgesAndCrossings_20140417/MapServer/0",{id:"bridge-under",mode:r.MODE_SELECTION,outFields:["*"],infoTemplate:et});k.setRenderer(n);k.on("selection-complete",ct);k.on("selection-clear",lt);w.addLayer(b);w.addLayer(k)});at=new v({map:w},document.getElementById("homeButton"));at.startup();d=new o({map:w,basemaps:[new s({id:"wsdot",title:"WSDOT",thumbnailUrl:"Images/WsdotBasemapThumbnail.jpg",layers:[new h({url:ft})]})],basemapIds:["wsdot"]},"basemapGallery");d.startup();d.on("load",function(){d.select("wsdot");i.hide(d.domNode)});w.on("update-end",function(){i.hide(document.getElementById("mapProgress"))});w.on("update-start",function(){i.show(document.getElementById("mapProgress"))});document.getElementById("basemapsToggleButton").onclick=function(){i.toggle(d.domNode)};document.forms.clearanceForm.onsubmit=function(){var r,n,f,t,u;try{if(this.blur(),r=this.clearance.value,n=Number(r),isNaN(n)&&(f=new g(r),n=f.totalInches()),t=this.route.value,t&&!(/^\d+$/.test(t)||/^\d{3}(?:(\w{2})(\w{0,6}))?$/.test(t)))return alert("Invalid route"),!1;u=!document.getElementById("includeNonMainlineCheckbox").checked;n&&(it=st(n-3),b.selectFeatures(vt("vert_clrnc_route_min",n,t,u)),i.show(nt),k.selectFeatures(vt("vert_clrnc_route_min",n,t,u)),i.show(tt))}catch(e){console.error(e)}return!1};document.forms.clearanceForm.onreset=function(){b.clearSelection();k.clearSelection();it=null}});
/*
//# sourceMappingURL=index.min.js.map
*/